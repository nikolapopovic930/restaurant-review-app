<ion-header>
  <ion-toolbar>
    <ion-title>{{title}}</ion-title>
    <ion-buttons slot="primary">
      <ion-button (click)="onCancel()">
        <ion-icon name="close"></ion-icon> 
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form #f="ngForm" (ngSubmit)="onSubmit()">
    <ion-grid>
      
      <ion-row>
        <ion-col size-sm="6" offset-sm="3">
          <ion-item lines="none">
            <ion-label position="floating">Name</ion-label>
            <ion-input type="text" [(ngModel)]="name" name="name" required #nameInput="ngModel"></ion-input>
          </ion-item>
          
          <ion-item lines="none" class="ion-text-center" *ngIf="nameInput.invalid && (nameInput.dirty || nameInput.touched)">
            <ion-label color="danger">This field is required!</ion-label>
          </ion-item>
      
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size-sm="6" offset-sm="3">
          <ion-item lines="none">
            <ion-label position="floating">Address</ion-label>
            <ion-input type="text" [(ngModel)]="address" name="address" required #addressInput="ngModel"></ion-input>
          </ion-item>
          
          <ion-item lines="none" class="ion-text-center" *ngIf="addressInput.invalid && (addressInput.dirty || addressInput.touched)">
            <ion-label color="danger">This field is required!</ion-label>
          </ion-item>
      
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size-sm="6" offset-sm="3">
          <ion-item lines="none">
            <ion-label position="floating">City</ion-label>
            <ion-input type="text" [(ngModel)]="city" name="city" required #cityInput="ngModel"></ion-input>
          </ion-item>
          
          <ion-item lines="none" class="ion-text-center" *ngIf="cityInput.invalid && (cityInput.dirty || cityInput.touched)">
            <ion-label color="danger">This field is required!</ion-label>
          </ion-item>
      
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size-sm="6" offset-sm="3">
          <ion-button expand="block" (click)="fillUserAddressWithUserCurrentPosition()">
            Find my location <ion-icon name="locate"></ion-icon> 
          </ion-button>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size-sm="6" offset-sm="3">
          <ion-item lines="none">
            <ion-label position="floating">Grade (1-5)</ion-label>
            <ion-input type="number" [(ngModel)]="grade" name="grade" required #gradeInput="ngModel"></ion-input>
          </ion-item>
          
          <ion-item lines="none" class="ion-text-center" *ngIf="gradeInput.invalid && (gradeInput.dirty || gradeInput.touched)">
            <ion-label color="danger">This field is required and must be a number!</ion-label>
          </ion-item>
      
          <ion-item lines="none" class="ion-text-center" *ngIf="isValidGrade(gradeInput.value)">
            <ion-label color="danger">This field must be between 1 and 5!</ion-label>
          </ion-item>

        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size-sm="6" offset-sm="3">
          <img *ngIf="image" [src]="image"/>
          <ion-button expand="block" (click)="takePicture()">Upload picture<ion-icon name="image-outline"></ion-icon></ion-button>
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size-sm="6" offset-sm="3">
          <ion-item lines="none">
            <ion-label position="floating">Text</ion-label>
            <ion-textarea rows="6" [(ngModel)]="text" name="text" required #textInput="ngModel"></ion-textarea>
          </ion-item>
          
          <ion-item lines="none" class="ion-text-center" *ngIf="textInput.invalid && (textInput.dirty || textInput.touched)">
            <ion-label color="danger">This field is required!</ion-label>
          </ion-item>
      
        </ion-col>
      </ion-row>

      <ion-row>
        <ion-col size-sm="6" offset-sm="3">
          <ion-button type="submit" expand="block" [disabled]="f.invalid || isValidGrade(gradeInput.value)">{{ mode === 'add' ? 'Add it' : 'Edit it' }}</ion-button>
        </ion-col>
      </ion-row>

      

    </ion-grid>
  </form>
</ion-content>
